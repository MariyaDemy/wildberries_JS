(()=>{"use strict";var __webpack_modules__={220:()=>{eval('\n;// CONCATENATED MODULE: ./src/modules/search.js\nconst search = () => {\r\n    const input = document.querySelector(\'.search-block > input\');\r\n    const searchBtn = document.querySelector(\'.search-block > button\');\r\n\r\n    const renderGoods = (goods) => {\r\n        const goodsContainer = document.querySelector(\'.long-goods-list\');\r\n\r\n        goodsContainer.innerHTML = \'\';\r\n\r\n        goods.forEach((good) => {\r\n            const goodBlock = document.createElement(\'div\');\r\n            goodBlock.classList.add(\'col-lg-3\');\r\n            goodBlock.classList.add(\'col-sm-6\');\r\n            goodBlock.innerHTML = `\r\n                <div class="goods-card">\r\n                    <span class="label ${good.label ? \'null\' : \'d-none\'}">${good.label}</span>\r\n                    <img src="db/${good.img}" alt="${good.name}" class="goods-image">\r\n                    <h3 class="goods-title">${good.name}</h3>\r\n                    <p class="goods-description">${good.description}</p>\r\n                    <button class="button goods-card-btn add-to-cart" data-id="${good.id}">\r\n                        <span class="button-price">${\'$\' + good.price}</span>\r\n                    </button>\r\n                </div>\r\n            `\r\n            goodsContainer.append(goodBlock)\r\n\r\n        })\r\n\r\n    }\r\n\r\n    const getData = (value) => {\r\n        fetch(\'https://wildberriesjs-b8f72-default-rtdb.firebaseio.com/db.json\')\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n\r\n                const array = data.filter(good => {\r\n                    return good.name.toLowerCase().includes(value.toLowerCase())\r\n                });\r\n\r\n                localStorage.setItem(\'goods\', JSON.stringify(array));\r\n\r\n                if (window.location.pathname !== "/goods.html") {\r\n                    window.location.href = \'/goods.html\'\r\n                } else {\r\n                    renderGoods(array);\r\n                }\r\n            })\r\n    }\r\n\r\n    // possible errors handling\r\n    try {\r\n        const showValue = function (e) {\r\n            console.log(input.value);\r\n            getData(input.value)\r\n        };\r\n\r\n        searchBtn.addEventListener(\'click\', showValue);\r\n\r\n    } catch (error) {\r\n        console.error(error.message)\r\n    }\r\n\r\n}\n;// CONCATENATED MODULE: ./src/modules/cart.js\nconst cart = function () {\r\n    const cartBtn = document.querySelector(\'.button-cart\')\r\n    const cart = document.getElementById(\'modal-cart\');\r\n    const closeBtn = cart.querySelector(\'.modal-close\');\r\n    const goodsContainer = document.querySelector(\'.long-goods-list\');\r\n    const cartTable = document.querySelector(".cart-table__goods");\r\n    const modalForm = document.querySelector(".modal-form");\r\n    const totalPrice = document.querySelector(".card-table__total");\r\n    const nameInput = document.querySelector(\'[name="nameCustomer"]\');\r\n    const phoneInput = document.querySelector("[name=\'phoneCustomer\']");\r\n\r\n    // Сохранить товары в localStorage\r\n    const addToCart = (id) => {\r\n        const goods = JSON.parse(localStorage.getItem(\'goods\'));\r\n        const clickedGood = goods.find(good => good.id === id);\r\n        const cart = localStorage.getItem(\'cart\') ?\r\n            JSON.parse(localStorage.getItem(\'cart\')) : []\r\n\r\n        // Добавить элемент в корзину (else) либо вернуть количество нажатых на него раз\r\n        if (cart.some(good => good.id === clickedGood.id)) {\r\n            cart.map((good) => {\r\n                if (good.id === clickedGood.id) {\r\n                    good.count++;\r\n                }\r\n                return good;\r\n            });\r\n        } else {\r\n            clickedGood.count = 1;\r\n            cart.push(clickedGood)\r\n        }\r\n\r\n        // Хранение товара в корзине\r\n        localStorage.setItem(\'cart\', JSON.stringify(cart));\r\n    };\r\n\r\n    // Удалить товар из корзины\r\n    const deleteCartItem = (id) => {\r\n        const cart = JSON.parse(localStorage.getItem("cart"));\r\n\r\n        const newCart = cart.filter((good) => {\r\n            return good.id !== id;\r\n        });\r\n\r\n        // Сохранить обновлённые данные и перерисовать корзину\r\n        localStorage.setItem("cart", JSON.stringify(newCart));\r\n        renderCartGoods(JSON.parse(localStorage.getItem("cart")));\r\n    };\r\n\r\n    // Увеличить количество товара в корзине\r\n    const plusCartItem = (id) => {\r\n        const cart = JSON.parse(localStorage.getItem("cart"));\r\n\r\n        const newCart = cart.map((good) => {\r\n            if (good.id === id) {\r\n                good.count++;\r\n            }\r\n            return good;\r\n        });\r\n\r\n        localStorage.setItem("cart", JSON.stringify(newCart));\r\n        renderCartGoods(JSON.parse(localStorage.getItem("cart")));\r\n    };\r\n\r\n    // Уменьшить количество товара в корзине\r\n    const minusCartItem = (id) => {\r\n        const cart = JSON.parse(localStorage.getItem("cart"));\r\n\r\n        const newCart = cart.map((good) => {\r\n            if (good.id === id) {\r\n                if (good.count > 0) {\r\n                    good.count--;\r\n                }\r\n            }\r\n            return good;\r\n        });\r\n\r\n        localStorage.setItem("cart", JSON.stringify(newCart));\r\n        renderCartGoods(JSON.parse(localStorage.getItem("cart")));\r\n    };\r\n\r\n    // Отрисовать элементы товаров в корзине\r\n    const renderCartGoods = (goods) => {\r\n        //Обновить всё, что было в cartTable\r\n        cartTable.innerHTML = ``;\r\n\r\n        goods.forEach((good) => {\r\n            const tr = document.createElement("tr");\r\n            tr.innerHTML = `\r\n\t\t\t\t\t\t<td>${good.name}</td>\r\n\t\t\t\t\t\t<td>$${good.price}</td>\r\n\t\t\t\t\t\t<td><button class="cart-btn-minus"">-</button></td>\r\n\t\t\t\t\t\t<td>${good.count}</td>\r\n\t\t\t\t\t\t<td><button class=" cart-btn-plus"">+</button></td>\r\n\t\t\t\t\t\t<td data-totalPrice="">$${+good.price * +good.count}</td>\r\n\t\t\t\t\t\t<td><button class="cart-btn-delete"">x</button></td>\r\n\t\t\t`;\r\n            cartTable.append(tr);\r\n\r\n            // События на кнопках в корзине\r\n            tr.addEventListener("click", (event) => {\r\n                if (event.target.classList.contains("cart-btn-minus")) {\r\n                    minusCartItem(good.id);\r\n                } else if (event.target.classList.contains("cart-btn-plus")) {\r\n                    plusCartItem(good.id);\r\n                } else if (event.target.classList.contains("cart-btn-delete")) {\r\n                    deleteCartItem(good.id);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Подсчитать  полную сумму корзины\r\n        let sum = 0;\r\n        goods.forEach(good => {\r\n            const total = good.count * good.price;\r\n            sum = sum + total;\r\n        })\r\n        totalPrice.innerText = `$${sum}`;\r\n    };\r\n\r\n    // Отправить данные формы в корзине (имя, телефон)\r\n    const sendForm = (name, phone) => {\r\n        const cart = localStorage.getItem("cart") ?\r\n            JSON.parse(localStorage.getItem("cart")) : [];\r\n\r\n        fetch("https://jsonplaceholder.typicode.com/posts", {\r\n            method: "POST",\r\n            // тело запроса, куда попадают данные из формы\r\n            body: JSON.stringify({\r\n                cart: cart,\r\n                name: name,\r\n                phone: phone,\r\n            }),\r\n        }).then(() => {\r\n            nameInput.value = "";\r\n            phoneInput.value = "";\r\n            localStorage.removeItem("cart");\r\n            cartTable.innerHTML = ``;\r\n            totalPrice.innerText = `$0`;\r\n        });\r\n    };\r\n\r\n    modalForm.addEventListener("submit", (e) => {\r\n        e.preventDefault();\r\n        const name = nameInput.value;\r\n        const phone = phoneInput.value;\r\n        sendForm(name, phone);\r\n    });\r\n\r\n    // Вызвать модальное окно\r\n    cartBtn.addEventListener("click", () => {\r\n        const cartArray = localStorage.getItem("cart") ?\r\n            JSON.parse(localStorage.getItem("cart")) : [];\r\n\r\n        renderCartGoods(cartArray);\r\n\r\n        cart.style.display = "flex"; //add inline styles\r\n    });\r\n\r\n    // Закрыть модальное окно\r\n    closeBtn.addEventListener("click", () => {\r\n        cart.style.display = ""; // or \'none\'\r\n    });\r\n\r\n    // Закрыть модальное окно по нажатию на область вне окна\r\n    cart.addEventListener("click", (e) => {\r\n        if (!e.target.closest(".modal") && e.target.classList.contains("overlay")) {\r\n            cart.style.display = "";\r\n        }\r\n    });\r\n\r\n    // Функция закрытия окна при нажатии на Escape\r\n    window.addEventListener("keydown", (e) => {\r\n        if (e.key === "Escape") {\r\n            cart.style.display = "";\r\n        }\r\n    });\r\n\r\n    // Функция добавления товара в корзину при нажатии на кнопку с ценой\r\n\r\n    if (goodsContainer) {\r\n        goodsContainer.addEventListener(\'click\', (event) => {\r\n            if (event.target.closest(".add-to-cart")) {\r\n                const buttonToCart = event.target.closest(".add-to-cart");\r\n                const goodId = buttonToCart.dataset.id;\r\n\r\n                addToCart(goodId);\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n// инкапсуляция кода : переменные в функции доступны только в рамках функции\r\n// в других функциях можно объявлять переменные с такими же названиями\n;// CONCATENATED MODULE: ./src/modules/getGoods.js\nconst getGoods = () => {\r\n\r\n    const links = document.querySelectorAll(\'.navigation-link\');\r\n    const more = document.querySelector(\'.more\');\r\n\r\n    const renderGoods = (goods) => {\r\n        const goodsContainer = document.querySelector(\'.long-goods-list\');\r\n\r\n        goodsContainer.innerHTML = \'\';\r\n\r\n        goods.forEach((good) => {\r\n            const goodBlock = document.createElement(\'div\');\r\n            goodBlock.classList.add(\'col-lg-3\');\r\n            goodBlock.classList.add(\'col-sm-6\');\r\n            goodBlock.innerHTML = `\r\n                <div class="goods-card">\r\n                    <span class="label ${good.label ? \'null\' : \'d-none\'}">${good.label}</span>\r\n                    <img src="db/${good.img}" alt="${good.name}" class="goods-image">\r\n                    <h3 class="goods-title">${good.name}</h3>\r\n                    <p class="goods-description">${good.description}</p>\r\n                    <button class="button goods-card-btn add-to-cart" data-id="${good.id}">\r\n                        <span class="button-price">${\'$\' + good.price}</span>\r\n                    </button>\r\n                </div>\r\n            `\r\n            goodsContainer.append(goodBlock)\r\n\r\n        })\r\n\r\n    }\r\n\r\n    const getData = (value, category) => {\r\n        fetch(\'https://wildberriesjs-b8f72-default-rtdb.firebaseio.com/db.json\')\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n\r\n                const array = category ? data.filter((item) => item[category] === value) : data\r\n                // значение в данных с сервера равны тексту ссылок\r\n                // server: gender: Womens + в ссылке текст Womens               \r\n\r\n                localStorage.setItem(\'goods\', JSON.stringify(array));\r\n\r\n                if (window.location.pathname !== "/goods.html") {\r\n                    window.location.href = \'/goods.html\'\r\n                } else {\r\n                    renderGoods(array);\r\n                }\r\n            })\r\n    }\r\n\r\n    links.forEach((link) => {\r\n        link.addEventListener(\'click\', (event) => {\r\n            event.preventDefault();\r\n\r\n            const linkValue = link.textContent;\r\n            const category = link.dataset.field;\r\n\r\n            getData(linkValue, category);\r\n        })\r\n    })\r\n\r\n    if (localStorage.getItem(\'goods\') && window.location.pathname === "/goods.html") {\r\n        renderGoods(JSON.parse(localStorage.getItem(\'goods\')))\r\n    }\r\n\r\n\r\n    if (more) {\r\n        more.addEventListener(\'click\', () => {\r\n            event.preventDefault();\r\n            getData();\r\n        })\r\n    }\r\n\r\n    // localStorage.setItem(\'goods\', JSON.stringify({\r\n    //     name: \'all\'\r\n    // }))\r\n\r\n    // const goods = JSON.parse(localStorage.getItem(\'goods\'));\r\n    // console.log(goods)\r\n\r\n    // localStorage.removeItem(\'goods\');\r\n    // console.log(localStorage);\r\n\r\n\r\n\r\n}\r\n\r\n\r\n// из-за .then код внутри () отработает только тогда, когда все данные точно загрузятся при помощи fetch\r\n// затем только когда все данные конвертируются в json сработает код внутри .then()\n;// CONCATENATED MODULE: ./src/goods.js\n\r\n\r\n\r\n\r\nsearch();\r\ncart();\r\ngetGoods();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDeEQsbURBQW1ELGlCQUFpQjtBQUNwRSxpRkFBaUYsUUFBUTtBQUN6RixxREFBcUQsaUJBQWlCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRjs7QUN2RjBCO0FBR0Y7QUFHSTtBQUM1QjtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0osUUFBUSIsInNvdXJjZXMiOlsid2VicGFjazovL3dpbGRiZXJyaWVzX2pzLy4vc3JjL21vZHVsZXMvc2VhcmNoLmpzP2UwNzUiLCJ3ZWJwYWNrOi8vd2lsZGJlcnJpZXNfanMvLi9zcmMvbW9kdWxlcy9jYXJ0LmpzP2FjMGUiLCJ3ZWJwYWNrOi8vd2lsZGJlcnJpZXNfanMvLi9zcmMvbW9kdWxlcy9nZXRHb29kcy5qcz9kNTlhIiwid2VicGFjazovL3dpbGRiZXJyaWVzX2pzLy4vc3JjL2dvb2RzLmpzPzdiZGEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNlYXJjaCA9ICgpID0+IHtcclxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1ibG9jayA+IGlucHV0Jyk7XHJcbiAgICBjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWJsb2NrID4gYnV0dG9uJyk7XHJcblxyXG4gICAgY29uc3QgcmVuZGVyR29vZHMgPSAoZ29vZHMpID0+IHtcclxuICAgICAgICBjb25zdCBnb29kc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb25nLWdvb2RzLWxpc3QnKTtcclxuXHJcbiAgICAgICAgZ29vZHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICAgIGdvb2RzLmZvckVhY2goKGdvb2QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ29vZEJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGdvb2RCbG9jay5jbGFzc0xpc3QuYWRkKCdjb2wtbGctMycpO1xyXG4gICAgICAgICAgICBnb29kQmxvY2suY2xhc3NMaXN0LmFkZCgnY29sLXNtLTYnKTtcclxuICAgICAgICAgICAgZ29vZEJsb2NrLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJnb29kcy1jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbCAke2dvb2QubGFiZWwgPyAnbnVsbCcgOiAnZC1ub25lJ31cIj4ke2dvb2QubGFiZWx9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiZGIvJHtnb29kLmltZ31cIiBhbHQ9XCIke2dvb2QubmFtZX1cIiBjbGFzcz1cImdvb2RzLWltYWdlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwiZ29vZHMtdGl0bGVcIj4ke2dvb2QubmFtZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZ29vZHMtZGVzY3JpcHRpb25cIj4ke2dvb2QuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZ29vZHMtY2FyZC1idG4gYWRkLXRvLWNhcnRcIiBkYXRhLWlkPVwiJHtnb29kLmlkfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJ1dHRvbi1wcmljZVwiPiR7JyQnICsgZ29vZC5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYFxyXG4gICAgICAgICAgICBnb29kc0NvbnRhaW5lci5hcHBlbmQoZ29vZEJsb2NrKVxyXG5cclxuICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBnZXREYXRhID0gKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgZmV0Y2goJ2h0dHBzOi8vd2lsZGJlcnJpZXNqcy1iOGY3Mi1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb20vZGIuanNvbicpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gZGF0YS5maWx0ZXIoZ29vZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdvb2QubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHZhbHVlLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ29vZHMnLCBKU09OLnN0cmluZ2lmeShhcnJheSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09IFwiL2dvb2RzLmh0bWxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9nb29kcy5odG1sJ1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJHb29kcyhhcnJheSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gcG9zc2libGUgZXJyb3JzIGhhbmRsaW5nXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHNob3dWYWx1ZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlucHV0LnZhbHVlKTtcclxuICAgICAgICAgICAgZ2V0RGF0YShpbnB1dC52YWx1ZSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93VmFsdWUpO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5tZXNzYWdlKVxyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBjb25zdCBjYXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgY2FydEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tY2FydCcpXHJcbiAgICBjb25zdCBjYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWNhcnQnKTtcclxuICAgIGNvbnN0IGNsb3NlQnRuID0gY2FydC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY2xvc2UnKTtcclxuICAgIGNvbnN0IGdvb2RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvbmctZ29vZHMtbGlzdCcpO1xyXG4gICAgY29uc3QgY2FydFRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJ0LXRhYmxlX19nb29kc1wiKTtcclxuICAgIGNvbnN0IG1vZGFsRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtZm9ybVwiKTtcclxuICAgIGNvbnN0IHRvdGFsUHJpY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtdGFibGVfX3RvdGFsXCIpO1xyXG4gICAgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9XCJuYW1lQ3VzdG9tZXJcIl0nKTtcclxuICAgIGNvbnN0IHBob25lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J3Bob25lQ3VzdG9tZXInXVwiKTtcclxuXHJcbiAgICAvLyDQodC+0YXRgNCw0L3QuNGC0Ywg0YLQvtCy0LDRgNGLINCyIGxvY2FsU3RvcmFnZVxyXG4gICAgY29uc3QgYWRkVG9DYXJ0ID0gKGlkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZ29vZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnb29kcycpKTtcclxuICAgICAgICBjb25zdCBjbGlja2VkR29vZCA9IGdvb2RzLmZpbmQoZ29vZCA9PiBnb29kLmlkID09PSBpZCk7XHJcbiAgICAgICAgY29uc3QgY2FydCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykgP1xyXG4gICAgICAgICAgICBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpIDogW11cclxuXHJcbiAgICAgICAgLy8g0JTQvtCx0LDQstC40YLRjCDRjdC70LXQvNC10L3RgiDQsiDQutC+0YDQt9C40L3RgyAoZWxzZSkg0LvQuNCx0L4g0LLQtdGA0L3Rg9GC0Ywg0LrQvtC70LjRh9C10YHRgtCy0L4g0L3QsNC20LDRgtGL0YUg0L3QsCDQvdC10LPQviDRgNCw0LdcclxuICAgICAgICBpZiAoY2FydC5zb21lKGdvb2QgPT4gZ29vZC5pZCA9PT0gY2xpY2tlZEdvb2QuaWQpKSB7XHJcbiAgICAgICAgICAgIGNhcnQubWFwKChnb29kKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ29vZC5pZCA9PT0gY2xpY2tlZEdvb2QuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBnb29kLmNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ29vZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2xpY2tlZEdvb2QuY291bnQgPSAxO1xyXG4gICAgICAgICAgICBjYXJ0LnB1c2goY2xpY2tlZEdvb2QpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQpdGA0LDQvdC10L3QuNC1INGC0L7QstCw0YDQsCDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoY2FydCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDQo9C00LDQu9C40YLRjCDRgtC+0LLQsNGAINC40Lcg0LrQvtGA0LfQuNC90YtcclxuICAgIGNvbnN0IGRlbGV0ZUNhcnRJdGVtID0gKGlkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FydCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjYXJ0XCIpKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3Q2FydCA9IGNhcnQuZmlsdGVyKChnb29kKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBnb29kLmlkICE9PSBpZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g0KHQvtGF0YDQsNC90LjRgtGMINC+0LHQvdC+0LLQu9GR0L3QvdGL0LUg0LTQsNC90L3Ri9C1INC4INC/0LXRgNC10YDQuNGB0L7QstCw0YLRjCDQutC+0YDQt9C40L3Rg1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY2FydFwiLCBKU09OLnN0cmluZ2lmeShuZXdDYXJ0KSk7XHJcbiAgICAgICAgcmVuZGVyQ2FydEdvb2RzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjYXJ0XCIpKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vINCj0LLQtdC70LjRh9C40YLRjCDQutC+0LvQuNGH0LXRgdGC0LLQviDRgtC+0LLQsNGA0LAg0LIg0LrQvtGA0LfQuNC90LVcclxuICAgIGNvbnN0IHBsdXNDYXJ0SXRlbSA9IChpZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2FydFwiKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld0NhcnQgPSBjYXJ0Lm1hcCgoZ29vZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZ29vZC5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIGdvb2QuY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZ29vZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjYXJ0XCIsIEpTT04uc3RyaW5naWZ5KG5ld0NhcnQpKTtcclxuICAgICAgICByZW5kZXJDYXJ0R29vZHMoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNhcnRcIikpKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0KPQvNC10L3RjNGI0LjRgtGMINC60L7Qu9C40YfQtdGB0YLQstC+INGC0L7QstCw0YDQsCDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgY29uc3QgbWludXNDYXJ0SXRlbSA9IChpZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2FydFwiKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld0NhcnQgPSBjYXJ0Lm1hcCgoZ29vZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZ29vZC5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChnb29kLmNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdvb2QuY291bnQtLTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZ29vZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjYXJ0XCIsIEpTT04uc3RyaW5naWZ5KG5ld0NhcnQpKTtcclxuICAgICAgICByZW5kZXJDYXJ0R29vZHMoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNhcnRcIikpKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtGA0LjRgdC+0LLQsNGC0Ywg0Y3Qu9C10LzQtdC90YLRiyDRgtC+0LLQsNGA0L7QsiDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgY29uc3QgcmVuZGVyQ2FydEdvb2RzID0gKGdvb2RzKSA9PiB7XHJcbiAgICAgICAgLy/QntCx0L3QvtCy0LjRgtGMINCy0YHRkSwg0YfRgtC+INCx0YvQu9C+INCyIGNhcnRUYWJsZVxyXG4gICAgICAgIGNhcnRUYWJsZS5pbm5lckhUTUwgPSBgYDtcclxuXHJcbiAgICAgICAgZ29vZHMuZm9yRWFjaCgoZ29vZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxyXG5cdFx0XHRcdFx0XHQ8dGQ+JHtnb29kLm5hbWV9PC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPiQke2dvb2QucHJpY2V9PC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPjxidXR0b24gY2xhc3M9XCJjYXJ0LWJ0bi1taW51c1wiXCI+LTwvYnV0dG9uPjwvdGQ+XHJcblx0XHRcdFx0XHRcdDx0ZD4ke2dvb2QuY291bnR9PC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPjxidXR0b24gY2xhc3M9XCIgY2FydC1idG4tcGx1c1wiXCI+KzwvYnV0dG9uPjwvdGQ+XHJcblx0XHRcdFx0XHRcdDx0ZCBkYXRhLXRvdGFsUHJpY2U9XCJcIj4kJHsrZ29vZC5wcmljZSAqICtnb29kLmNvdW50fTwvdGQ+XHJcblx0XHRcdFx0XHRcdDx0ZD48YnV0dG9uIGNsYXNzPVwiY2FydC1idG4tZGVsZXRlXCJcIj54PC9idXR0b24+PC90ZD5cclxuXHRcdFx0YDtcclxuICAgICAgICAgICAgY2FydFRhYmxlLmFwcGVuZCh0cik7XHJcblxyXG4gICAgICAgICAgICAvLyDQodC+0LHRi9GC0LjRjyDQvdCwINC60L3QvtC/0LrQsNGFINCyINC60L7RgNC30LjQvdC1XHJcbiAgICAgICAgICAgIHRyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FydC1idG4tbWludXNcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW51c0NhcnRJdGVtKGdvb2QuaWQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FydC1idG4tcGx1c1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsdXNDYXJ0SXRlbShnb29kLmlkKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNhcnQtYnRuLWRlbGV0ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUNhcnRJdGVtKGdvb2QuaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g0J/QvtC00YHRh9C40YLQsNGC0YwgINC/0L7Qu9C90YPRjiDRgdGD0LzQvNGDINC60L7RgNC30LjQvdGLXHJcbiAgICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICAgICAgZ29vZHMuZm9yRWFjaChnb29kID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdG90YWwgPSBnb29kLmNvdW50ICogZ29vZC5wcmljZTtcclxuICAgICAgICAgICAgc3VtID0gc3VtICsgdG90YWw7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0b3RhbFByaWNlLmlubmVyVGV4dCA9IGAkJHtzdW19YDtcclxuICAgIH07XHJcblxyXG4gICAgLy8g0J7RgtC/0YDQsNCy0LjRgtGMINC00LDQvdC90YvQtSDRhNC+0YDQvNGLINCyINC60L7RgNC30LjQvdC1ICjQuNC80Y8sINGC0LXQu9C10YTQvtC9KVxyXG4gICAgY29uc3Qgc2VuZEZvcm0gPSAobmFtZSwgcGhvbmUpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJ0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjYXJ0XCIpID9cclxuICAgICAgICAgICAgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNhcnRcIikpIDogW107XHJcblxyXG4gICAgICAgIGZldGNoKFwiaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3Bvc3RzXCIsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgLy8g0YLQtdC70L4g0LfQsNC/0YDQvtGB0LAsINC60YPQtNCwINC/0L7Qv9Cw0LTQsNGO0YIg0LTQsNC90L3Ri9C1INC40Lcg0YTQvtGA0LzRi1xyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBjYXJ0OiBjYXJ0LFxyXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgICAgIHBob25lOiBwaG9uZSxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIG5hbWVJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIHBob25lSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImNhcnRcIik7XHJcbiAgICAgICAgICAgIGNhcnRUYWJsZS5pbm5lckhUTUwgPSBgYDtcclxuICAgICAgICAgICAgdG90YWxQcmljZS5pbm5lclRleHQgPSBgJDBgO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBtb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBuYW1lID0gbmFtZUlucHV0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHBob25lID0gcGhvbmVJbnB1dC52YWx1ZTtcclxuICAgICAgICBzZW5kRm9ybShuYW1lLCBwaG9uZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQktGL0LfQstCw0YLRjCDQvNC+0LTQsNC70YzQvdC+0LUg0L7QutC90L5cclxuICAgIGNhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJ0QXJyYXkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNhcnRcIikgP1xyXG4gICAgICAgICAgICBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2FydFwiKSkgOiBbXTtcclxuXHJcbiAgICAgICAgcmVuZGVyQ2FydEdvb2RzKGNhcnRBcnJheSk7XHJcblxyXG4gICAgICAgIGNhcnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiOyAvL2FkZCBpbmxpbmUgc3R5bGVzXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQl9Cw0LrRgNGL0YLRjCDQvNC+0LTQsNC70YzQvdC+0LUg0L7QutC90L5cclxuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgY2FydC5zdHlsZS5kaXNwbGF5ID0gXCJcIjsgLy8gb3IgJ25vbmUnXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQl9Cw0LrRgNGL0YLRjCDQvNC+0LTQsNC70YzQvdC+0LUg0L7QutC90L4g0L/QviDQvdCw0LbQsNGC0LjRjiDQvdCwINC+0LHQu9Cw0YHRgtGMINCy0L3QtSDQvtC60L3QsFxyXG4gICAgY2FydC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoXCIubW9kYWxcIikgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3ZlcmxheVwiKSkge1xyXG4gICAgICAgICAgICBjYXJ0LnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vINCk0YPQvdC60YbQuNGPINC30LDQutGA0YvRgtC40Y8g0L7QutC90LAg0L/RgNC4INC90LDQttCw0YLQuNC4INC90LAgRXNjYXBlXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcclxuICAgICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgY2FydC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQpNGD0L3QutGG0LjRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDRgtC+0LLQsNGA0LAg0LIg0LrQvtGA0LfQuNC90YMg0L/RgNC4INC90LDQttCw0YLQuNC4INC90LAg0LrQvdC+0L/QutGDINGBINGG0LXQvdC+0LlcclxuXHJcbiAgICBpZiAoZ29vZHNDb250YWluZXIpIHtcclxuICAgICAgICBnb29kc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuYWRkLXRvLWNhcnRcIikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblRvQ2FydCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmFkZC10by1jYXJ0XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ29vZElkID0gYnV0dG9uVG9DYXJ0LmRhdGFzZXQuaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgYWRkVG9DYXJ0KGdvb2RJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyDQuNC90LrQsNC/0YHRg9C70Y/RhtC40Y8g0LrQvtC00LAgOiDQv9C10YDQtdC80LXQvdC90YvQtSDQsiDRhNGD0L3QutGG0LjQuCDQtNC+0YHRgtGD0L/QvdGLINGC0L7Qu9GM0LrQviDQsiDRgNCw0LzQutCw0YUg0YTRg9C90LrRhtC40LhcclxuLy8g0LIg0LTRgNGD0LPQuNGFINGE0YPQvdC60YbQuNGP0YUg0LzQvtC20L3QviDQvtCx0YrRj9Cy0LvRj9GC0Ywg0L/QtdGA0LXQvNC10L3QvdGL0LUg0YEg0YLQsNC60LjQvNC4INC20LUg0L3QsNC30LLQsNC90LjRj9C80LgiLCJleHBvcnQgY29uc3QgZ2V0R29vZHMgPSAoKSA9PiB7XHJcblxyXG4gICAgY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi1saW5rJyk7XHJcbiAgICBjb25zdCBtb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vcmUnKTtcclxuXHJcbiAgICBjb25zdCByZW5kZXJHb29kcyA9IChnb29kcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGdvb2RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvbmctZ29vZHMtbGlzdCcpO1xyXG5cclxuICAgICAgICBnb29kc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgICAgZ29vZHMuZm9yRWFjaCgoZ29vZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBnb29kQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZ29vZEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2NvbC1sZy0zJyk7XHJcbiAgICAgICAgICAgIGdvb2RCbG9jay5jbGFzc0xpc3QuYWRkKCdjb2wtc20tNicpO1xyXG4gICAgICAgICAgICBnb29kQmxvY2suaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdvb2RzLWNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsICR7Z29vZC5sYWJlbCA/ICdudWxsJyA6ICdkLW5vbmUnfVwiPiR7Z29vZC5sYWJlbH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJkYi8ke2dvb2QuaW1nfVwiIGFsdD1cIiR7Z29vZC5uYW1lfVwiIGNsYXNzPVwiZ29vZHMtaW1hZ2VcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJnb29kcy10aXRsZVwiPiR7Z29vZC5uYW1lfTwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJnb29kcy1kZXNjcmlwdGlvblwiPiR7Z29vZC5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBnb29kcy1jYXJkLWJ0biBhZGQtdG8tY2FydFwiIGRhdGEtaWQ9XCIke2dvb2QuaWR9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnV0dG9uLXByaWNlXCI+JHsnJCcgKyBnb29kLnByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgICAgIGdvb2RzQ29udGFpbmVyLmFwcGVuZChnb29kQmxvY2spXHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdldERhdGEgPSAodmFsdWUsIGNhdGVnb3J5KSA9PiB7XHJcbiAgICAgICAgZmV0Y2goJ2h0dHBzOi8vd2lsZGJlcnJpZXNqcy1iOGY3Mi1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb20vZGIuanNvbicpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gY2F0ZWdvcnkgPyBkYXRhLmZpbHRlcigoaXRlbSkgPT4gaXRlbVtjYXRlZ29yeV0gPT09IHZhbHVlKSA6IGRhdGFcclxuICAgICAgICAgICAgICAgIC8vINC30L3QsNGH0LXQvdC40LUg0LIg0LTQsNC90L3Ri9GFINGBINGB0LXRgNCy0LXRgNCwINGA0LDQstC90Ysg0YLQtdC60YHRgtGDINGB0YHRi9C70L7QulxyXG4gICAgICAgICAgICAgICAgLy8gc2VydmVyOiBnZW5kZXI6IFdvbWVucyArINCyINGB0YHRi9C70LrQtSDRgtC10LrRgdGCIFdvbWVucyAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnb29kcycsIEpTT04uc3RyaW5naWZ5KGFycmF5KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gXCIvZ29vZHMuaHRtbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2dvb2RzLmh0bWwnXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckdvb2RzKGFycmF5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBsaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XHJcbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGlua1ZhbHVlID0gbGluay50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSBsaW5rLmRhdGFzZXQuZmllbGQ7XHJcblxyXG4gICAgICAgICAgICBnZXREYXRhKGxpbmtWYWx1ZSwgY2F0ZWdvcnkpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ29vZHMnKSAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09IFwiL2dvb2RzLmh0bWxcIikge1xyXG4gICAgICAgIHJlbmRlckdvb2RzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dvb2RzJykpKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpZiAobW9yZSkge1xyXG4gICAgICAgIG1vcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGdldERhdGEoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnb29kcycsIEpTT04uc3RyaW5naWZ5KHtcclxuICAgIC8vICAgICBuYW1lOiAnYWxsJ1xyXG4gICAgLy8gfSkpXHJcblxyXG4gICAgLy8gY29uc3QgZ29vZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnb29kcycpKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGdvb2RzKVxyXG5cclxuICAgIC8vIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdnb29kcycpO1xyXG4gICAgLy8gY29uc29sZS5sb2cobG9jYWxTdG9yYWdlKTtcclxuXHJcblxyXG5cclxufVxyXG5cclxuXHJcbi8vINC40Lct0LfQsCAudGhlbiDQutC+0LQg0LLQvdGD0YLRgNC4ICgpINC+0YLRgNCw0LHQvtGC0LDQtdGCINGC0L7Qu9GM0LrQviDRgtC+0LPQtNCwLCDQutC+0LPQtNCwINCy0YHQtSDQtNCw0L3QvdGL0LUg0YLQvtGH0L3QviDQt9Cw0LPRgNGD0LfRj9GC0YHRjyDQv9GA0Lgg0L/QvtC80L7RidC4IGZldGNoXHJcbi8vINC30LDRgtC10Lwg0YLQvtC70YzQutC+INC60L7Qs9C00LAg0LLRgdC1INC00LDQvdC90YvQtSDQutC+0L3QstC10YDRgtC40YDRg9GO0YLRgdGPINCyIGpzb24g0YHRgNCw0LHQvtGC0LDQtdGCINC60L7QtCDQstC90YPRgtGA0LggLnRoZW4oKSIsImltcG9ydCB7XHJcbiAgICBzZWFyY2hcclxufSBmcm9tICcuL21vZHVsZXMvc2VhcmNoJztcclxuaW1wb3J0IHtcclxuICAgIGNhcnRcclxufSBmcm9tICcuL21vZHVsZXMvY2FydCc7XHJcbmltcG9ydCB7XHJcbiAgICBnZXRHb29kc1xyXG59IGZyb20gJy4vbW9kdWxlcy9nZXRHb29kcyc7XHJcblxyXG5zZWFyY2goKTtcclxuY2FydCgpO1xyXG5nZXRHb29kcygpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///220\n')}},__webpack_exports__={};__webpack_modules__[220]()})();